<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Be NIRD</title>
		<link rel="stylesheet" href="style.css" />
		<link rel="stylesheet" href="snake/snake-home.css" />
		<link rel="stylesheet" href="username/user.css">
		<link rel="stylesheet" href="chatbot/chatbot.css"
	</head>
	<body>
		<!-- Rideau d'ouverture -->
		<div class="container-principal" id="containerPrincipal">
			<div class="container-content">
				<div class="title">
					<h1>Be NIRD</h1>
				</div>
				<button class="button" id="openButton">
					Let's start the adventure !
				</button>
			</div>
		</div>

		<!-- Interface interm√©diaire pour le username -->
		<div class="username-screen" id="usernameScreen" style="display: none">
			<div class="input-group">
				<label for="username">Nom d'utilisateur (optionnel) :</label>
				<input
					type="text"
					id="username"
					placeholder="Tapez votre nom d'utilisateur..."
					autocomplete="off"
				/>
				<p style="font-size: 0.9em; color: #555; margin-top: 5px;">
					Vous pouvez laisser vide et cliquer sur le bouton pour passer au quiz
				</p>
				<button id="startQuizBtn">Commencer l'aventure</button>
			</div>
		</div>

		<!-- Quiz qui appara√Æt apr√®s l'ouverture -->
		<div class="hidden-content" id="hiddenContent">
			<div class="snake-home">
				<canvas id="snake-canvas"></canvas>
			</div>
			<div class="quiz-container">
				<h1>Qu√™te de l'aventurier</h1>
				<div id="cards"></div>
				<div class="nav-buttons">
					<button id="prevBtn">‚Üê Pr√©c√©dent</button>
					<button id="nextBtn">Suivant ‚Üí</button>
				</div>
			</div>
		</div>
		 <div id="timer-display" class="timer-box">‚è≥ 00:00</div>

		<!-- Page de fin (cach√©e par d√©faut) -->
		<div id="endScreen" class="end-screen hidden">
			<div class="end-content">
				<h1 class="end-title">Bravo : <span id="endUsername"></span> !</h1>

				<div class="score-box">
					<h2 class="final-score">
						Score Final : <span id="finalScore">0</span> / <span id="finalTotal">0</span>
					</h2>
					<p class="percentage">
						<span id="finalPercentage">0</span>% de r√©ussite
					</p>
				</div>

				<div class="custom-content">
					 <h3 class="content-title">R√©capitulatif </h3>

                    <p class="content-text">
                        Vous avez d√©montr√© votre connaissance de la d√©marche NIRD et du num√©rique responsable.
                        Votre score prouve que vous √™tes sensibilis√© aux enjeux environnementaux du num√©rique.
                    </p>

                    <p class="content-text">
                        Ensemble, construisons un avenir num√©rique plus durable et inclusif !
                    </p>

                    <div class="achievements">
                        <h4 style="margin-bottom: 15px; font-size: 1.3em;">Ce que vous avez pu voir :</h4>
                        <ul class="achievement-list">
                            <li>‚úÖ
 L'impact environnemental de la production num√©rique</li>
                            <li>‚úÖ
 Les principes du NIRD (Num√©rique Inclusif Responsable Durable)</li>
                            <li>‚úÖ
 Les avantages de Linux pour la durabilit√©</li>
                            <li>‚úÖ
 L'importance du reconditionnement</li>
                        </ul>
                    </div>

                    <div class="next-steps">
                        <h4 style="margin-top: 25px; margin-bottom: 15px; font-size: 1.3em;"> Et maintenant ?</h4>
                        <p class="content-text">
                            Continuez √† utiliser des pratiques num√©riques responsables au quotidien notamment en parlant autour de vous de la d√©marche NIRD.
                        </p>
                        <p>Et consulter le site de la d√©marche NIRD pour devenir incolable dessus ! </p>
                        <a href="https://nird.forge.apps.education.fr/index.html">D√©marche NIRD</a>
                    </div>
				</div>

				<button id="restartBtn" class="restart-button">
					 On repart pour un tour ?
				</button>
			</div>
		</div>
		<button class="chat-button" id="chatButton" onclick="toggleChat()">
        <!-- Ici on charge l'image de Pedro qui est dans le dossier chatbot -->
        <img src="chatbot/pedro.png" alt="Pedro" class="chat-avatar" />
    </button>

    <!-- La fen√™tre de discussion -->
    <div class="chat-container" id="chatContainer">
        <div class="header">
            <div class="header-title">
                <span style="font-size: 1.2em;">üë±</span>
                <h1>Pedro (L'Assistant)</h1>
            </div>
            <button class="close-btn" onclick="toggleChat()">√ó</button>
        </div>

        <div class="model-selector">
            <select id="modelSelect" onchange="changeModel()">
                <option value="openai/gpt-oss-20b:free">GPT-OSS 20b (Gratuit)</option>
                <option value="meta-llama/llama-3.2-3b-instruct:free">Llama 3.2 3B (Gratuit)</option>
            </select>
            <button class="clear-btn" onclick="clearConversation()">üóëÔ∏è Effacer la m√©moire</button>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="message assistant">
                <div class="message-avatar">ü§ñ</div>
                <div class="message-content">
                    Hol√† ! Je suis Pedro ! Qu'est-ce que tu veux ?
                </div>
            </div>
        </div>

        <div class="input-area">
            <div class="input-container">
                <input
                    type="text"
                    id="messageInput"
                    placeholder="Parle √† Pedro..."
                    onkeypress="handleKeyPress(event)"
                />
                <button onclick="sendMessage()" id="sendButton">Envoyer</button>
            </div>
        </div>
    </div>

		<audio id= "musique-fond" loop>
			<source src="Son_nuit_info.mp3" type="audio/mpeg">
		</audio>

		<script src="script.js"></script>
		<script src="snake/snake-home.js"></script>
		<script src="username/user.js"></script>
		<script src="chatbot/chatbot.js"></script>
	</body>
</html>
