<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Be NIRD</title>
		<link rel="stylesheet" href="style.css" />
		<link rel="stylesheet" href="snake/snake-home.css" />
		<link rel="stylesheet" href="username/user.css">
		<link rel="stylesheet" href="chatbot/chatbot.css"
	</head>
	<body>
		<!-- Rideau d'ouverture -->
		<div class="container-principal" id="containerPrincipal">
			<div class="container-content">
				<div class="title">
					<h1>Be NIRD</h1>
				</div>
				<button class="button" id="openButton">
					Let's start the adventure !
				</button>
			</div>
		</div>

		<!-- Interface intermÃ©diaire pour le username -->
		<div class="username-screen" id="usernameScreen" style="display: none">
			<div class="input-group">
				<label for="username">Nom d'utilisateur (optionnel) :</label>
				<input
					type="text"
					id="username"
					placeholder="Tapez votre nom d'utilisateur..."
					autocomplete="off"
				/>
				<p style="font-size: 0.9em; color: #555; margin-top: 5px;">
					Vous pouvez laisser vide et cliquer sur le bouton pour passer au quiz
				</p>
				<button id="startQuizBtn">Commencer l'aventure</button>
			</div>
		</div>

		<!-- Quiz qui apparaÃ®t aprÃ¨s l'ouverture -->
		<div class="hidden-content" id="hiddenContent">
			<div class="snake-home">
				<canvas id="snake-canvas"></canvas>
			</div>
			<div class="quiz-container">
				<h1>QuÃªte de l'aventurier</h1>
				<div id="cards"></div>
				<div class="nav-buttons">
					<button id="prevBtn">â† PrÃ©cÃ©dent</button>
					<button id="nextBtn">Suivant â†’</button>
				</div>
			</div>
		</div>
		 <div id="timer-display" class="timer-box">â³ 00:00</div>

		<!-- Page de fin (cachÃ©e par dÃ©faut) -->
		<div id="endScreen" class="end-screen hidden">
			<div class="end-content">
				<h1 class="end-title">Bravo : <span id="endUsername"></span> !</h1>
				<div class="custom-content"></div>
                    </div>
				</div>
			</div>
		</div>
		<button class="chat-button" id="chatButton" onclick="toggleChat()">
        <!-- Ici on charge l'image de Pedro qui est dans le dossier chatbot -->
        <img src="chatbot/pedro.png" alt="Pedro" class="chat-avatar" />
    </button>

    <!-- La fenÃªtre de discussion -->
    <div class="chat-container" id="chatContainer">
        <div class="header">
            <div class="header-title">
                <span style="font-size: 1.2em;">ğŸ‘±</span>
                <h1>Pedro (L'Assistant)</h1>
            </div>
            <button class="close-btn" onclick="toggleChat()">Ã—</button>
        </div>

        <div class="model-selector">
            <select id="modelSelect" onchange="changeModel()">
                <option value="openai/gpt-oss-20b:free">GPT-OSS 20b (Gratuit)</option>
                <option value="meta-llama/llama-3.2-3b-instruct:free">Llama 3.2 3B (Gratuit)</option>
            </select>
            <button class="clear-btn" onclick="clearConversation()">ğŸ—‘ï¸ Effacer la mÃ©moire</button>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="message assistant">
                <div class="message-avatar">ğŸ¤–</div>
                <div class="message-content">
                    HolÃ  ! Je suis Pedro ! Qu'est-ce que tu veux ?
                </div>
            </div>
        </div>

        <div class="input-area">
            <div class="input-container">
                <input
                    type="text"
                    id="messageInput"
                    placeholder="Parle Ã  Pedro..."
                    onkeypress="handleKeyPress(event)"
                />
                <button onclick="sendMessage()" id="sendButton">Envoyer</button>
            </div>
        </div>
    </div>

		<audio id= "musique-fond" loop>
			<source src="Son_nuit_info.mp3" type="audio/mpeg">
		</audio>

		<script src="script.js"></script>
		<script src="snake/snake-home.js"></script>
		<script src="username/user.js"></script>
		<script src="chatbot/chatbot.js"></script>
	</body>
</html>
